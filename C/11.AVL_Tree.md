## 11. AVL Tree
---

### 1. 平衡二叉树

BST(Binary Search Tree，二叉搜索树)，是一种简单的查找树，它的特点如下：

 - 若任意结点的左子树不为空，则左子树上所有结点的值均小于其根节点上的值。
 - 若任意结点的右子树不为空，则右子树上所有结点的值均大于其根节点上的值。
 - 任意结点的左右子树也称为二叉搜索树。
 - 二叉搜索树中没有关键字相同的结点。
 
 按照**二叉搜索树**的插入规则，当插入数据时，会发生如下情况：
 
 <img src = "https://img-blog.csdnimg.cn/20190913140516438.png" width = "80%">
 
 从图中可以看出，当插入数据为有序序列时，二叉搜索树会退化为一个链表，此时插入和查找等操作时间复杂度为`Θ(n)`。
 
 为了改进这个问题，G. M. **A**delson-**V**elsky和E. M. **L**andis提出了一种高度平衡的查找树结构，简称**AVL树**。
 
 **AVL树需要满足以下几个要求：**
 
  - AVL树满足二叉搜索树的所有特点
  - AVL树的每个结点的左右子树的高度之差的绝对值（**平衡因子**）最多为1。
  
  为了满足上述要求，需要在二叉搜索树的基础上增加一个操作：**平衡**。
  
  此外，为了判断AVL树的平衡性，为每个节点添加了一个`bf`域作为平衡因子，AVL树的节点定义如下：
  
  ```c
typedef struct Node {
	ElemType data;
	int bf;
	struct Node* lchild, * rchild;
}Node, *AVLTree;
  ```
  其中，平衡因子的取值为如下三个值：
  
  ```c
#define LH 1	// 左高
#define EH 0	// 等高
#define RH -1	// 右高
  ```

举个例子，下图中插入关键字5之前的个结点平衡因子如图所示：

<img src = "https://img-blog.csdnimg.cn/20190914112413984.png"  width = "80%">
 
插入关键字5之后，其父结点即以上的结点平衡因子均发生变化，例如结点6由`EH`变为了`LH`，而结点4由`EH`变为了`RH`;

**值得注意的是**：由于根结点8的平衡因子原本为`LH`，且其左子树增长了，因此可判断AVL树的性质遭到了破坏，需要进行**平衡**操作。

### 2. 非平衡状态

在上面的例子中，结点8的平衡因子为`LH`，而其左孩子结点的平衡因子为`RH`，我们把这种非平衡的状态称为`LR`型。

按照上述方式可以将所有的非平衡状态分为如下四种类型：

<img src = "https://img-blog.csdnimg.cn/20190914114242841.png" width = "100%">

对于这四种类型，在平衡的时候会采取不同的旋转操作。

### 3. 旋转
